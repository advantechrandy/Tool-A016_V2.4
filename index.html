<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>長方體輻射散熱瓦特數計算</title>
    <!-- 引入 Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Noto+Sans+TC:wght@300;500;900&display=swap');

        :root {
            font-family: 'Noto Sans TC', sans-serif;
            --industrial-orange: #f97316;
            --industrial-gray: #1f2937;
        }

        body {
            background-color: #111827;
            background-image: radial-gradient(circle at 2px 2px, #374151 1px, transparent 0);
            background-size: 40px 40px;
        }

        .industrial-font {
            font-family: 'Orbitron', sans-serif;
        }

        /* 亮色字體效果 */
        .neon-text {
            color: #fff;
            text-shadow: 0 0 5px #fff, 0 0 10px #f97316;
        }

        .input-field {
            background-color: #374151;
            color: #f3f4f6;
            border: 2px solid #4b5563;
        }

        .input-field:focus {
            border-color: #f97316;
            outline: none;
            box-shadow: 0 0 10px rgba(249, 115, 22, 0.3);
        }

        .card-border {
            border: 4px solid #374151;
            position: relative;
        }

        .card-border::before {
            content: "ENGINEERING UNIT";
            position: absolute;
            top: -12px;
            right: 20px;
            background: #111827;
            padding: 0 10px;
            color: #6b7280;
            font-size: 10px;
            letter-spacing: 2px;
        }

        /* 裝飾性螺絲 */
        .screw {
            width: 12px;
            height: 12px;
            background: #4b5563;
            border-radius: 50%;
            position: absolute;
            box-shadow: inset 2px 2px 4px #1f2937;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div class="w-full max-w-lg bg-gray-900 p-8 rounded-sm shadow-2xl card-border">
        <!-- 四角螺絲裝飾 -->
        <div class="screw top-2 left-2"></div>
        <div class="screw top-2 right-2"></div>
        <div class="screw bottom-2 left-2"></div>
        <div class="screw bottom-2 right-2"></div>

        <h1 class="text-3xl font-black text-orange-500 mb-2 text-center industrial-font uppercase tracking-tighter">
            Radiation Calc
        </h1>
        <h2 class="text-lg font-bold text-white mb-6 text-center border-b border-orange-600 pb-3">
            長方體輻射散熱計算 V2.4
        </h2>
        
        <p class="text-xs text-gray-400 mb-6 text-center italic">
            Theoretical basis: Stefan-Boltzmann Law | Created by Randy Chen
        </p>

        <!-- 輸入欄位容器 -->
        <div id="input-fields" class="space-y-5">

            <!-- 1. 表面發射率 (Emissivity) -->
            <div class="bg-gray-800 p-4 rounded border-l-4 border-orange-500">
                <label for="emissivity" class="block text-sm font-bold text-orange-400 mb-1">
                    表面輻射率 (ε):
                </label>
                <input type="number" id="emissivity" value="0.95" min="0.01" max="1.0" step="0.01"
                       class="input-field block w-full px-4 py-2 rounded-sm transition duration-150 font-mono"
                       placeholder="0.01 ~ 1.0">
                <p class="text-[10px] text-gray-500 mt-1 uppercase tracking-widest">
                    Polished Copper: ~0.03 | Black Coating: ~0.95
                </p>
            </div>

            <!-- 2. 長方體尺寸 -->
            <div class="bg-gray-800 p-4 rounded border-l-4 border-orange-500">
                <label class="block text-sm font-bold text-orange-400 mb-3">
                    結構尺寸 DIMENSIONS (mm):
                </label>
                <div class="grid grid-cols-3 gap-4">
                    <div class="flex flex-col">
                        <span class="text-[9px] text-gray-400 mb-1 font-bold">LENGTH (L)</span>
                        <input type="number" id="length" value="100" min="1" step="1"
                               class="input-field px-2 py-3 w-full rounded-sm font-mono text-center text-lg">
                    </div>
                    <div class="flex flex-col">
                        <span class="text-[9px] text-gray-400 mb-1 font-bold">WIDTH (W)</span>
                        <input type="number" id="width" value="100" min="1" step="1"
                               class="input-field px-2 py-3 w-full rounded-sm font-mono text-center text-lg">
                    </div>
                    <div class="flex flex-col">
                        <span class="text-[9px] text-gray-400 mb-1 font-bold">HEIGHT (H)</span>
                        <input type="number" id="height" value="100" min="1" step="1"
                               class="input-field px-2 py-3 w-full rounded-sm font-mono text-center text-lg">
                    </div>
                </div>
                <p id="calculated-area" class="text-xs text-orange-300 mt-3 text-right industrial-font">
                    AREA (A): 0.0600 m²
                </p>
            </div>

            <div class="grid grid-cols-2 gap-4">
                <!-- 3. 熱表面溫度 (T1) -->
                <div class="bg-gray-800 p-4 rounded border-l-4 border-orange-500">
                    <label for="temp-hot" class="block text-sm font-bold text-orange-400 mb-1">
                        系統表面 (°C):
                    </label>
                    <input type="number" id="temp-hot" value="80" min="-273.15" step="1"
                           class="input-field block w-full px-4 py-2 rounded-sm font-mono text-lg">
                </div>

                <!-- 4. 冷/環境溫度 (T2) -->
                <div class="bg-gray-800 p-4 rounded border-l-4 border-blue-500">
                    <label for="temp-cold" class="block text-sm font-bold text-blue-400 mb-1">
                        環境溫度 (°C):
                    </label>
                    <input type="number" id="temp-cold" value="25" min="-273.15" step="1"
                           class="input-field block w-full px-4 py-2 rounded-sm font-mono text-lg">
                </div>
            </div>

        </div>

        <!-- 計算按鈕 -->
        <button onclick="calculateRadiation()"
                class="w-full mt-8 py-4 px-4 border-2 border-orange-600 rounded-sm shadow-lg text-xl font-black text-white bg-orange-600 hover:bg-orange-500 hover:border-white transition duration-200 transform industrial-font uppercase tracking-widest active:scale-95">
            Execute Analysis
        </button>

        <!-- 結果顯示區 -->
        <div id="results-container" class="mt-8 pt-6 border-t-2 border-dashed border-gray-700">
            <h2 class="text-xs font-bold text-gray-500 mb-4 text-center uppercase tracking-widest">Calculated Output</h2>

            <div id="result-output"
                 class="p-6 bg-black border-2 border-orange-900 rounded-sm text-center shadow-inner min-h-[6rem] flex flex-col items-center justify-center relative overflow-hidden">
                <div class="absolute top-0 left-0 w-full h-1 bg-orange-600 opacity-20"></div>
                <p id="result-text" class="text-2xl industrial-font neon-text">
                    READY TO COMPUTE
                </p>
            </div>
            
            <p id="error-message" class="text-xs text-red-500 mt-3 hidden text-center font-bold uppercase">
                <!-- 錯誤訊息 -->
            </p>
        </div>

    </div>

    <script>
        // 阻擋滑鼠右鍵選單
        document.addEventListener('contextmenu', function(event) {
            event.preventDefault();
        });

        const STEFAN_BOLTZMANN_CONSTANT = 5.67e-8;
        const KELVIN_OFFSET = 273.15;

        const emissivityInput = document.getElementById('emissivity');
        const lengthInput = document.getElementById('length');
        const widthInput = document.getElementById('width');
        const heightInput = document.getElementById('height');
        const calculatedAreaText = document.getElementById('calculated-area');
        const tempHotInput = document.getElementById('temp-hot');
        const tempColdInput = document.getElementById('temp-cold');
        const resultText = document.getElementById('result-text');
        const errorMessage = document.getElementById('error-message');

        function displayError(message) {
            errorMessage.textContent = "⚠ ERROR: " + message;
            errorMessage.classList.remove('hidden');
            resultText.textContent = "SYS FAILURE";
            resultText.classList.remove('neon-text');
            resultText.classList.add('text-red-600');
        }

        function clearError() {
            errorMessage.textContent = '';
            errorMessage.classList.add('hidden');
            resultText.classList.remove('text-red-600');
            resultText.classList.add('neon-text');
        }

        function calculateSurfaceArea(L_m, W_m, H_m) {
            return 2 * (L_m * W_m + L_m * H_m + W_m * H_m);
        }

        function calculateRadiation() {
            clearError();

            const epsilon = parseFloat(emissivityInput.value);
            const L = parseFloat(lengthInput.value);
            const W = parseFloat(widthInput.value);
            const H = parseFloat(heightInput.value);
            const T_C_hot = parseFloat(tempHotInput.value);
            const T_C_cold = parseFloat(tempColdInput.value);

            if (isNaN(epsilon) || isNaN(L) || isNaN(W) || isNaN(H) || isNaN(T_C_hot) || isNaN(T_C_cold)) {
                return;
            }

            if (epsilon <= 0 || epsilon > 1) {
                return displayError("EMISSIVITY RANGE ERROR");
            }

            if (L <= 0 || W <= 0 || H <= 0) {
                return displayError("DIMENSION MUST BE POSITIVE");
            }
            
            if (T_C_hot < -KELVIN_OFFSET || T_C_cold < -KELVIN_OFFSET) {
                return displayError("TEMP BELOW ABS ZERO");
            }

            const L_m = L / 1000;
            const W_m = W / 1000;
            const H_m = H / 1000;
            
            const A = calculateSurfaceArea(L_m, W_m, H_m);
            calculatedAreaText.innerHTML = `AREA (A): <span class="text-white">${A.toFixed(4)}</span> m²`;

            const T_K_hot = T_C_hot + KELVIN_OFFSET;
            const T_K_cold = T_C_cold + KELVIN_OFFSET;
            const delta_T_power_4 = Math.pow(T_K_hot, 4) - Math.pow(T_K_cold, 4);
            const Q_net = epsilon * STEFAN_BOLTZMANN_CONSTANT * A * delta_T_power_4;

            if (Q_net <= 0) {
                 resultText.innerHTML = `0.00 W`;
                 if (T_C_hot < T_C_cold) {
                    displayError("NET HEAT GAIN (T1 < T2)");
                 }
                 return;
            }

            resultText.innerHTML = `<span class="text-sm block text-orange-400">NET POWER LOSS (Q)</span>${Q_net.toFixed(2)} W`;
        }

        window.onload = calculateRadiation;

        [emissivityInput, lengthInput, widthInput, heightInput, tempHotInput, tempColdInput].forEach(el => {
            el.addEventListener('input', calculateRadiation);
        });
    </script>

</body>
</html>